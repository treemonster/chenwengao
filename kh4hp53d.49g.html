<meta charset="utf-8"/>
<base target='_blank' />
<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport" />
<script src="d406894cfa4abad298d58c7b414562d6.js"></script>
<script src="91620078a585e5bdb8800b8a10c6713f.js"></script>
<script src="ccac98ae433a8aa600476534a7176a62.js"></script>
<link href="172a73b72f7c34c71e23b75fc6b0072c.css" type='text/css' rel='stylesheet' />
<link href="a07e1e35d2e6f45540bf0cc2f4a6f11d.css" type='text/css' rel='stylesheet' />
<link href="783dbec16270c788c55c8548f11b13ec.css" type='text/css' rel='stylesheet' />
<script src="3dbf2693384e804fe7eacbf30116bc91.js"></script>

<title>jxa运动指令脚本</title>

<body class="readonly github-io">
<div class='tabc'>
<div class='datelist-btn white-btn'>展开目录</div>
<div class="tabsr">
  <div class="tabsr-title">jxa运动指令脚本</div>
  <div class="tabsr-tags"><span class="tagz" style="background: #7ea958">jxa</span><span class="tagz" style="background: #bea456">applescript</span><span class="tagz" style="background: #140c1f">mac</span></div>
</div>
</div>
<div class='datelist'>
  <div class='searchdiv'>
    <div class='datelist-btn-close white-btn'>X</div>
    <div class="inexport text">
      陈尼玛的博客
    </div>
    <div class="description">记录开发生涯的踩坑经历，用时间来验证成长</div>
  </div>
  <div id='lst'></div>
</div>

<div id="content"><p>定量健身，通过脚本指令来控制健身节奏和数量，争取早日突破限制器，变秃也变强。</p>
<p>jxa脚本内容</p>
<pre><code>#!/usr/bin/env osascript -l JavaScript

const app=Application.currentApplication()
app.includeStandardAdditions=true

app.displayAlert(&#39;请检查设置&#39;, {message: &#39;屏幕熄灭时，本进程会被中止，因此请修改 节能设置 保持程序运行期间屏幕常亮&#39;})

function loop(a, b, fn) {
  for(let i=a; i&lt;b*1; i++) {
    try{
      fn(i)
    }catch(e){
      break
    }
  }
}

/***
  X数字 倒计时，例X3: 3 2 1
  Y数字 正计时，例Y3: 1 2 3
  P数字 后面的操作循环，每次循环完成后报数，例：P10X3，即循环10次倒计时 3 2 1
  数字 延迟指定秒
  文字串：朗读指定文字
  **/

const jobs=`
每日健身开始，准备
X3

打坐，5分钟，准备
X3
开始
300
完成

俯卧撑第一组10个，请按照节奏进行，准备
X3
开始
P10X3Y3
休息3分钟
180

俯卧撑第二组10个，请按照节奏进行，准备
X3
开始
P10X3Y3
休息3分钟
180

仰卧起坐第一组15个，请按照节奏进行，准备
X3
开始
P15X3Y3
休息3分钟
180

仰卧起坐第二组15个，请按照节奏进行，准备
X3
开始
P15X3Y3
休息3分钟
180

下蹲第一组10个，请按照节奏进行，准备
X3
开始
P10X3Y3
休息3分钟
180

下蹲第二组10个，请按照节奏进行，准备
X3
开始
P10X3Y3
休息3分钟
180

已完成全部锻炼，明天也请坚持，加油

P10X3Y3

`

jobs.match(/.+/g).map(str=&gt;{
  str=str.trim()
  if(!str) return
  if(str.match(/^\d+$/)) return loop(0, str, i=&gt;{
      app.beep()
    delay(1)
  })
  if(!str.match(/^([A-Z])\d+/)) return app.say(str)
  const fn=arr=&gt;loop(0, arr.length, i=&gt;{
    const [c, n]=arr[i].match(/[A-Z]|\d+/g)
    if(c===&#39;P&#39;) throw loop(0, n, j=&gt;{
      fn(arr.slice(i+1, arr.length))
      app.say(j+1)
    })
    if(c===&#39;X&#39;) loop(0, n, j=&gt;{
      app.say(n-j)
      delay(1)
    })
    if(c===&#39;Y&#39;) loop(0, n, j=&gt;{
      app.say(j+1)
      delay(1)
    })

  })

  fn(str.match(/[A-Z]\d+/g))
})

app.displayAlert(&#39;请检查设置&#39;, {message: &#39;程序运行完毕，请还原 节能设置&#39;})
</code></pre>
<p>保存为 run.osa</p>
<pre><code>chmod +x run.osa
./osa</code></pre>
<p>参考文档：</p>
<ol>
<li><a href="https://www.cnblogs.com/andrewwang/p/8536446.html">https://www.cnblogs.com/andrewwang/p/8536446.html</a></li>
<li><a href="https://developer.apple.com/library/archive/releasenotes/InterapplicationCommunication/RN-JavaScriptForAutomation/Articles/Introduction.html">https://developer.apple.com/library/archive/releasenotes/InterapplicationCommunication/RN-JavaScriptForAutomation/Articles/Introduction.html</a></li>
<li><a href="https://developer.apple.com/library/archive/documentation/AppleScript/Conceptual/AppleScriptLangGuide/conceptual/ASLR_fundamentals.html#//apple_ref/doc/uid/TP40000983-CH218-SW2">https://developer.apple.com/library/archive/documentation/AppleScript/Conceptual/AppleScriptLangGuide/conceptual/ASLR_fundamentals.html#//apple_ref/doc/uid/TP40000983-CH218-SW2</a></li>
<li><a href="https://github.com/JXA-Cookbook/JXA-Cookbook/wiki">https://github.com/JXA-Cookbook/JXA-Cookbook/wiki</a></li>
</ol>
<blockquote>
<h3 id="相关文档">相关文档</h3>
</blockquote>
<ol>
<li><p><a href="kh4hp4xw.fuh.html">mac 终端运行后台程序如何在终端关闭时继续运行</a></p>
</li>
<li><p><a href="kh4hp53d.49g.html">jxa运动指令脚本</a></p>
</li>
</ol>
<blockquote>
<h3 id="随便看看">随便看看</h3>
</blockquote>
<ol>
<li><p><a href="khbe1zve.29n.html">css多行文本超出截断显示省略号</a></p>
</li>
<li><p><a href="khalg5ks.g.html">css3自定义滚动条样式</a></p>
</li>
<li><p><a href="kh8hr1ki.4fs.html">mac ssh透过代理连接</a></p>
</li>
<li><p><a href="kh4hp4u7.5l8.html">react项目webpack打包时拆分异步加载的文件</a></p>
</li>
<li><p><a href="kh4hp4ut.68c.html">华为等国产手机rem宽度超过实际宽度</a></p>
</li>
<li><p><a href="kh4hp4wj.uv.html">nginx 子域名对应文件夹</a></p>
</li>
<li><p><a href="kh4hp4x0.yw.html">pip安装nltk临时使用国内源</a></p>
</li>
<li><p><a href="kh4hp51g.d79.html">SSL certificate problem: self signed certificate in certificate chain</a></p>
</li>
<li><p><a href="kh4hp54d.xb.html">git删除远程分支</a></p>
</li>
<li><p><a href="kh4hp56p.7c.html">heroku查看app使用时间</a></p>
</li>
<li><p><a href="kh4hp574.hum.html">heroku登陆cli</a></p>
</li>
<li><p><a href="kh4hp57y.fpf.html">npm设置仓库地址和代理</a></p>
</li>
<li><p><a href="kh4hp596.lj.html">webrtc泄漏本地ip信息</a></p>
</li>
<li><p><a href="kh4hp5by.jnt.html">webpack使用外部资源</a></p>
</li>
<li><p><a href="kh4hp5cd.lmo.html">TIME_WAIT过多</a></p>
</li>
<li><p><a href="kh4hp5e1.ou.html">git 设置代理服务器</a></p>
</li>
</ol>
</div>

<div class="body-mask"></div>

<script>
var qid="kh4hp53d.49g";
var LOGINED=0;
var IS_FOR_GITHUB_IO=1;
</script>
<script src="3287a981a890e10d9ffc6af37b73ff89.js"></script>
</body>
